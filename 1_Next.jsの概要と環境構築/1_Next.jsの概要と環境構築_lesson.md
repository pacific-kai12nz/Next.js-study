# 1. Next.jsの概要と環境構築

## Next.jsとは

Next.jsは、Reactベースのフルスタックフレームワークです。Reactの機能を拡張し、より効率的にWebアプリケーションを開発するための様々な機能を提供しています。

### Next.jsの主な特徴

1. **サーバーサイドレンダリング (SSR)**
   - ページのHTMLをサーバー側で生成することにより、初期読み込みが高速
   - SEO対策に効果的

2. **静的サイト生成 (SSG)**
   - ビルド時にHTMLを生成し、CDNから配信可能
   - 高速なページ読み込みを実現

3. **ファイルベースルーティング**
   - ファイル構造に基づいて自動的にルーティングを設定
   - 複雑な設定が不要

4. **API Routes**
   - フロントエンドと同じNext.jsプロジェクト内にAPIエンドポイントを作成可能
   - フルスタック開発を簡単に実現

5. **App Router**
   - 最新のNext.js 13以降で導入された新しいルーティングシステム
   - Reactの最新機能（Server Components、Streaming）をサポート

6. **デベロッパーエクスペリエンスの向上**
   - ホットリロードによる開発効率の向上
   - TypeScriptのサポート
   - 自動コード分割による最適化

### なぜNext.jsが役立つのか

1. **開発の効率化**
   - Reactの利点を活かしつつ、ボイラープレートコードを削減
   - 多くのユースケースに対応するための機能が組み込み済み

2. **パフォーマンスの最適化**
   - 自動的な画像最適化
   - コード分割による初期ロード時間の短縮
   - サーバーサイドレンダリングによる高速な初期表示

3. **スケーラビリティ**
   - 小規模なプロジェクトから大規模なアプリケーションまで対応可能
   - 機能追加が容易

4. **SEO対策**
   - サーバーサイドレンダリングによる検索エンジン最適化

## プロジェクトの初期設定

### 必要な環境

- Node.js (16.8以上)
- npm、yarnまたはpnpm

### プロジェクトの作成

Next.jsプロジェクトを作成するには、次のコマンドを使用します：

```bash
# npmを使用する場合
npx create-next-app@latest

# yarnを使用する場合
yarn create next-app

# pnpmを使用する場合
pnpm create next-app
```

セットアップ時に以下のような質問に答えます：

- プロジェクト名
- TypeScriptを使用するか
- ESlintを使用するか
- Tailwind CSSを使用するか
- App Routerを使用するか（最新の機能を使うため、はい を選択）
- srcディレクトリを使用するか
- importエイリアスを使用するか

### ブログアプリケーションのセットアップ

今回はブログアプリケーションを作成しますので、以下のような設定で進めていきましょう：

- TypeScriptを使用
- App Routerを使用
- Tailwind CSSを使用
- PostgreSQLデータベース用にDockerを使用
- Prisma ORMを使用してデータベースと接続

## アプリの基本構造

App Routerを使用したNext.jsプロジェクトの基本的なディレクトリ構造は以下のようになっています：

```
my-blog/
├── .next/            # ビルドされたアプリ（自動生成）
├── node_modules/     # インストールされたパッケージ
├── public/           # 静的ファイル（画像、フォント等）
├── src/              # ソースコード
│   ├── app/          # App Routerを使用したページ
│   │   ├── layout.tsx       # ルートレイアウト
│   │   ├── page.tsx         # ホームページ
│   │   ├── [slug]/          # 動的ルート
│   │   │   └── page.tsx
│   │   └── api/             # APIルート
│   │       └── [...]/route.ts
│   ├── components/   # 共通コンポーネント
│   └── lib/          # ユーティリティ関数、設定等
├── .eslintrc.json    # ESLint設定
├── .gitignore        # Gitが無視するファイルの設定
├── next.config.js    # Next.jsの設定ファイル
├── package.json      # プロジェクト依存関係
├── postcss.config.js # PostCSS設定（Tailwind用）
├── tailwind.config.js # Tailwind CSS設定
└── tsconfig.json     # TypeScript設定
```

### 重要なファイルの説明

1. **src/app/layout.tsx**
   - アプリケーション全体のレイアウトを定義
   - メタデータ、共通のヘッダー/フッター等を設定

2. **src/app/page.tsx**
   - ルートURL（/）にアクセスしたときに表示されるページ

3. **src/app/api/route.ts**
   - APIエンドポイントを定義

4. **next.config.js**
   - Next.jsの設定ファイル
   - 環境変数、画像最適化、リダイレクト等を設定

5. **package.json**
   - プロジェクトの依存関係や実行スクリプトを管理

### サーバーコンポーネントとクライアントコンポーネント

Next.js 13のApp Routerでは、デフォルトですべてのコンポーネントがサーバーコンポーネントとなります。クライアントコンポーネントとして使用する場合は、ファイルの先頭に次の指示を追加します：

```typescript
'use client'
```

サーバーコンポーネントとクライアントコンポーネントについては、次の学習項目で詳しく学びます。
